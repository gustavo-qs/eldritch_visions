import{_ as i,E as c,S as d,T as u,a as m,Q as l,W as p,A as f,b as g,c as b,d as h,o as v}from"./index-wEOfh7UJ.js";const w={name:"BabylonARComponent",mounted(){this.initBabylon(),window.addEventListener("resize",this.onResize)},beforeUnmount(){window.removeEventListener("resize",this.onResize),this.engine&&this.engine.dispose()},methods:{async initBabylon(){const n=document.getElementById("renderCanvas"),a=new c(n,!0,{preserveDrawingBuffer:!0,stencil:!0,disableWebGL2Support:!1}),e=await this.createScene(a,n);a.runRenderLoop(()=>{e&&e.activeCamera&&e.render()}),this.engine=a,this.scene=e},async createScene(n,a){const e=new d(n);return await this.setupXR(e,{uiOptions:{sessionMode:"immersive-ar"}}),e},async setupXR(n,a){n.createDefaultEnvironment({createGround:!1,createSkybox:!1});const e=new u("root",n),s=await m.ImportMeshAsync("","https://cdn.tinyglb.com/models/","be180dfc00cc4150a5bba2f349e58fcc.glb",n);s.meshes[0].parent=e,e.rotationQuaternion=new l;const t=await n.createDefaultXRExperienceAsync(a);return t.baseExperience.featuresManager.enableFeature(p.IMAGE_TRACKING,"latest",{images:[{src:"https://github.com/gustavo-qs/eldritch_visions/blob/main/src/assets/qrcode.png?raw=true",estimatedRealWorldWidth:.2}]}).onTrackedImageUpdatedObservable.add(o=>{o.transformationMatrix.decompose(e.scaling,e.rotationQuaternion,e.position),e.setEnabled(!0),e.translate(f.Y,.1,g.LOCAL)}),t},onResize(){this.engine&&this.engine.resize()}}},_={id:"canvasZone"};function y(n,a,e,s,t,r){return v(),b("div",_,a[0]||(a[0]=[h("canvas",{id:"renderCanvas"},null,-1)]))}const x=i(w,[["render",y],["__scopeId","data-v-6c0c739b"]]);export{x as default};
